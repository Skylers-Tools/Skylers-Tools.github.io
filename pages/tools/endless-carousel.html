<!doctype html>
<html lang="en">
<head>
  <meta data-include="/partials/head.html"></meta>
  <title>Endless Carousel — Simple, Data-Attribute-Free</title>
  <meta name="description" content="Endless carousel with no data-attributes and a script-free instructions section.">
  <!-- Include loader -->
  <script defer src="/assets/js/include.js"></script>
  <style>
    /* ===== Carousel (scoped, no external deps, no data-attrs) ===== */
    .uc { 
      width: 100%; 
      max-width: 960px; 
      margin: 2rem auto; 
      position: relative; 
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .uc__container {
      overflow: hidden;
      border: 1px solid #ddd;
      border-radius: 12px;
      background: #fafafa;
    }
    .uc__track {
      display: flex;
      gap: 12px;
      padding: 12px;
      will-change: transform;
      transform: translateX(0);
      transition: transform 500ms ease-in-out;
      box-sizing: border-box;
    }
    .uc__item { flex: 0 0 calc((100% - (12px * 3)) / 4); box-sizing: border-box; }
    @media (max-width: 992px){ .uc__item { flex-basis: calc((100% - (12px * 2)) / 3); } }
    @media (max-width: 768px){ .uc__item { flex-basis: calc((100% - 12px) / 2); } }
    @media (max-width: 576px){ .uc__item { flex-basis: 100%; } }

    /* Demo card look (replace as needed) */
    .uc-card {
      border: 2px solid #bbb;
      background: #eee;
      border-radius: 8px;
      padding: 24px 0;
      font-weight: 600;
      text-align: center;
      user-select: none;
    }

    /* Controls (simple button; no data-attrs) */
    .uc__controls { display: flex; justify-content: flex-end; gap: 8px; margin-top: 8px; }
    .uc-btn { 
      appearance: none; 
      border: 1px solid #ddd; 
      background: #fff; 
      border-radius: 8px; 
      padding: 8px 12px; 
      line-height: 1; 
      cursor: pointer; 
    }
    .uc-btn:focus-visible { outline: 2px solid #0d6efd; outline-offset: 2px; }

    /* Prefer-reduced-motion: disable autoplay */
    @media (prefers-reduced-motion: reduce) {
      .uc__track { transition: none !important; }
    }

    /* ===== Instruction section (no scripts, no data-attrs) ===== */
    .guide { max-width: 960px; margin: 3rem auto 4rem; }
    .guide h2 { margin: 0 0 0.5rem; }
    .guide ol { margin-left: 1.25rem; }
    .guide pre { 
      background: #111; 
      color: #e6e6e6; 
      border-radius: 10px; 
      padding: 14px; 
      overflow: auto; 
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; 
      font-size: 0.95rem; 
      line-height: 1.4; 
      margin: 0.5rem 0 1.25rem;
    }
    .guide code { color: #e6e6e6; }
  </style>
</head>
<body>
  <!-- Global header -->
  <div data-include="/partials/header.html"></div>

  <main class="wrap">
    <!-- ======================
         LIVE CAROUSEL (simple)
         ====================== -->
    <section class="uc" aria-label="Endless Carousel">
      <div class="uc__container">
        <div class="uc__track" aria-live="off">
          <!-- Original items only; JS will append clones -->
          <div class="uc__item"><div class="uc-card">1</div></div>
          <div class="uc__item"><div class="uc-card">2</div></div>
          <div class="uc__item"><div class="uc-card">3</div></div>
          <div class="uc__item"><div class="uc-card">4</div></div>
          <div class="uc__item"><div class="uc-card">5</div></div>
          <div class="uc__item"><div class="uc-card">6</div></div>
          <div class="uc__item"><div class="uc-card">7</div></div>
          <div class="uc__item"><div class="uc-card">8</div></div>
          <div class="uc__item"><div class="uc-card">9</div></div>
          <div class="uc__item"><div class="uc-card">10</div></div>
          <div class="uc__item"><div class="uc-card">11</div></div>
        </div>
      </div>

      <div class="uc__controls">
        <button type="button" class="uc-btn uc-toggle" aria-pressed="false" aria-label="Pause auto-scrolling">Pause</button>
      </div>

      <p style="text-align:center;margin-top:0.75rem;color:#666;font-size:0.95rem;">
        Auto-scrolling, seamless loop. Use “Pause” to stop motion.
      </p>
    </section>

    <!-- ======================
         INSTRUCTIONS (pure HTML)
         ====================== -->
    <section class="guide" aria-labelledby="guide-title">
      <h2 id="guide-title">How to Install This Carousel</h2>
      <ol>
        <li><strong>HTML structure</strong> — paste this where you want the carousel to appear:</li>
        <pre><code>&lt;section class="uc" aria-label="Endless Carousel"&gt;
  &lt;div class="uc__container"&gt;
    &lt;div class="uc__track" aria-live="off"&gt;
      &lt;div class="uc__item"&gt;&lt;div class="uc-card"&gt;Item 1&lt;/div&gt;&lt;/div&gt;
      &lt;div class="uc__item"&gt;&lt;div class="uc-card"&gt;Item 2&lt;/div&gt;&lt;/div&gt;
      &lt;!-- ...add as many as you like (5+ recommended) --&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  &lt;div class="uc__controls"&gt;
    &lt;button type="button" class="uc-btn uc-toggle" aria-pressed="false"&gt;Pause&lt;/button&gt;
  &lt;/div&gt;
&lt;/section&gt;</code></pre>

        <li><strong>CSS (scoped)</strong> — add these rules to the page or your stylesheet:</li>
        <pre><code>/* see this page's &lt;style&gt; for full version; keep class names the same */
.uc { max-width: 960px; margin: 2rem auto; }
.uc__container { overflow: hidden; border: 1px solid #ddd; border-radius: 12px; background: #fafafa; }
.uc__track { display: flex; gap: 12px; padding: 12px; transition: transform 500ms ease-in-out; will-change: transform; }
.uc__item { flex: 0 0 calc((100% - (12px * 3)) / 4); }
@media (max-width: 992px){ .uc__item { flex-basis: calc((100% - (12px * 2)) / 3); } }
@media (max-width: 768px){ .uc__item { flex-basis: calc((100% - 12px) / 2); } }
@media (max-width: 576px){ .uc__item { flex-basis: 100%; } }</code></pre>

        <li><strong>JavaScript</strong> — place right before <code>&lt;/body&gt;</code> (editor must allow scripts on the page where the carousel lives):</li>
        <pre><code>(function(){
  var root = document.querySelector('.uc');
  if(!root) return;

  var track = root.querySelector('.uc__track');
  var container = root.querySelector('.uc__container');
  var toggleBtn = root.querySelector('.uc-toggle');

  // === CONFIG (no data-attrs; edit here) ===
  var STEP_MS = 1200;        // ms between moves
  var TRANSITION_MS = 500;   // keep in sync with CSS transition
  var PAUSE_ON_HOVER = true; // hover pauses autoplay
  var MOVE_BY = 'page';      // 'page' to jump visible count, or number (1,2,...)

  var reduceMotion = false;
  try { reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches; } catch(e){}

  var originals = Array.prototype.slice.call(track.children).map(function(el){ el.setAttribute('data-original','1'); return el; });
  var currentIndex = 0, itemWidth = 0, visibleCount = 1, intervalId = null, isResetting = false;

  function measureItemWidth(){
    var first = track.querySelector('.uc__item');
    return first ? first.getBoundingClientRect().width : 0;
  }
  function computeVisibleCount(){
    var w = container.clientWidth;
    var iw = itemWidth || measureItemWidth();
    if(!iw) return 1;
    var raw = Math.max(1, Math.round(w / iw));
    return Math.max(1, Math.min(raw, originals.length));
  }
  function setTransform(px){ track.style.transform = 'translateX(-' + px + 'px)'; }
  function moveBy(){
    if (MOVE_BY === 'page') return visibleCount;
    var n = Number(MOVE_BY);
    return (isFinite(n) && n > 0) ? Math.floor(n) : 1;
  }
  function ensureClones(){
    Array.prototype.slice.call(track.querySelectorAll('[data-clone="1"]')).forEach(function(n){ n.remove(); });
    var needed = visibleCount + (moveBy() - 1);
    originals.slice(0, needed).forEach(function(n){
      var c = n.cloneNode(true);
      c.setAttribute('data-clone','1');
      track.appendChild(c);
    });
  }
  function maxRealStartIndex(){ return originals.length - visibleCount; }

  function step(){
    if(isResetting) return;
    currentIndex += moveBy();
    if(currentIndex > maxRealStartIndex()){
      setTransform(currentIndex * itemWidth);
      isResetting = true;
      setTimeout(function(){
        var prev = track.style.transition;
        track.style.transition = 'none';
        currentIndex = 0;
        setTransform(0);
        setTimeout(function(){ track.style.transition = 'transform ' + TRANSITION_MS + 'ms ease-in-out'; isResetting = false; }, 50);
      }, TRANSITION_MS);
    } else {
      setTransform(currentIndex * itemWidth);
    }
  }
  function start(){
    stop();
    if(reduceMotion) return;
    intervalId = setInterval(step, STEP_MS);
    if(toggleBtn){ toggleBtn.setAttribute('aria-pressed','false'); toggleBtn.textContent = 'Pause'; toggleBtn.setAttribute('aria-label','Pause auto-scrolling'); }
  }
  function stop(){
    if(intervalId){ clearInterval(intervalId); intervalId = null; }
    if(toggleBtn){ toggleBtn.setAttribute('aria-pressed','true'); toggleBtn.textContent = 'Play'; toggleBtn.setAttribute('aria-label','Resume auto-scrolling'); }
  }
  function layout(){
    track.style.transition = 'transform ' + TRANSITION_MS + 'ms ease-in-out';
    itemWidth = measureItemWidth();
    var newVisible = computeVisibleCount();
    if(newVisible !== visibleCount){ visibleCount = newVisible; ensureClones(); }
    else if(!track.querySelector('[data-clone="1"]')) { ensureClones(); }
    var prev = track.style.transition;
    track.style.transition = 'none';
    setTransform(currentIndex * itemWidth);
    setTimeout(function(){ track.style.transition = prev; }, 0);
  }
  function debounce(fn, ms){ var t; return function(){ var a = arguments; clearTimeout(t); t = setTimeout(function(){ fn.apply(null, a); }, ms); }; }

  window.addEventListener('load', function(){
    layout();
    visibleCount = computeVisibleCount();
    ensureClones();
    start();
  });
  if(PAUSE_ON_HOVER){
    container.addEventListener('mouseenter', stop);
    container.addEventListener('mouseleave', start);
  }
  if(toggleBtn){ toggleBtn.addEventListener('click', function(){ intervalId ? stop() : start(); }); }
  document.addEventListener('visibilitychange', function(){ document.hidden ? stop() : start(); });
  window.addEventListener('resize', debounce(function(){
    var prevV = visibleCount;
    layout();
    if(visibleCount !== prevV){
      currentIndex = currentIndex % originals.length;
      var prev = track.style.transition;
      track.style.transition = 'none';
      setTransform(currentIndex * itemWidth);
      setTimeout(function(){ track.style.transition = prev; }, 0);
    }
  }, 150));
})();</code></pre>

        <li><strong>Tuning</strong> — Edit the JS constants only:
          <ul>
            <li><code>STEP_MS</code> — time between moves.</li>
            <li><code>TRANSITION_MS</code> — must match the CSS transition duration.</li>
            <li><code>PAUSE_ON_HOVER</code> — <code>true</code> or <code>false</code>.</li>
            <li><code>MOVE_BY</code> — <code>'page'</code> for full-viewport jumps (classic feel), or a number (e.g., <code>1</code>, <code>2</code>).</li>
          </ul>
        </li>
      </ol>
    </section>
  </main>

  <div data-include="/partials/footer.html"></div>

  <!-- Main loader -->
  <script src="/assets/js/main.js"></script>

  <!-- Carousel logic (working area only; instructions above are script-free) -->
  <script>
    /* The same JS as in the instructions block above, kept inline so this page runs standalone. */
    (function(){
      var root = document.querySelector('.uc');
      if(!root) return;

      var track = root.querySelector('.uc__track');
      var container = root.querySelector('.uc__container');
      var toggleBtn = root.querySelector('.uc-toggle');

      var STEP_MS = 1200;
      var TRANSITION_MS = 500;
      var PAUSE_ON_HOVER = true;
      var MOVE_BY = 'page';

      var reduceMotion = false;
      try { reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches; } catch(e){}

      var originals = Array.prototype.slice.call(track.children).map(function(el){ el.setAttribute('data-original','1'); return el; });
      var currentIndex = 0, itemWidth = 0, visibleCount = 1, intervalId = null, isResetting = false;

      function measureItemWidth(){ var first = track.querySelector('.uc__item'); return first ? first.getBoundingClientRect().width : 0; }
      function computeVisibleCount(){ var w = container.clientWidth; var iw = itemWidth || measureItemWidth(); if(!iw) return 1; var raw = Math.max(1, Math.round(w / iw)); return Math.max(1, Math.min(raw, originals.length)); }
      function setTransform(px){ track.style.transform = 'translateX(-' + px + 'px)'; }
      function moveBy(){ if (MOVE_BY === 'page') return visibleCount; var n = Number(MOVE_BY); return (isFinite(n) && n > 0) ? Math.floor(n) : 1; }
      function ensureClones(){
        Array.prototype.slice.call(track.querySelectorAll('[data-clone="1"]')).forEach(function(n){ n.remove(); });
        var needed = visibleCount + (moveBy() - 1);
        originals.slice(0, needed).forEach(function(n){
          var c = n.cloneNode(true);
          c.setAttribute('data-clone','1');
          track.appendChild(c);
        });
      }
      function maxRealStartIndex(){ return originals.length - visibleCount; }
      function step(){
        if(isResetting) return;
        currentIndex += moveBy();
        if(currentIndex > maxRealStartIndex()){
          setTransform(currentIndex * itemWidth);
          isResetting = true;
          setTimeout(function(){
            var prev = track.style.transition;
            track.style.transition = 'none';
            currentIndex = 0;
            setTransform(0);
            setTimeout(function(){ track.style.transition = 'transform ' + TRANSITION_MS + 'ms ease-in-out'; isResetting = false; }, 50);
          }, TRANSITION_MS);
        } else {
          setTransform(currentIndex * itemWidth);
        }
      }
      function start(){
        stop();
        if(reduceMotion) return;
        intervalId = setInterval(step, STEP_MS);
        if(toggleBtn){ toggleBtn.setAttribute('aria-pressed','false'); toggleBtn.textContent = 'Pause'; toggleBtn.setAttribute('aria-label','Pause auto-scrolling'); }
      }
      function stop(){
        if(intervalId){ clearInterval(intervalId); intervalId = null; }
        if(toggleBtn){ toggleBtn.setAttribute('aria-pressed','true'); toggleBtn.textContent = 'Play'; toggleBtn.setAttribute('aria-label','Resume auto-scrolling'); }
      }
      function layout(){
        track.style.transition = 'transform ' + TRANSITION_MS + 'ms ease-in-out';
        itemWidth = measureItemWidth();
        var newVisible = computeVisibleCount();
        if(newVisible !== visibleCount){ visibleCount = newVisible; ensureClones(); }
        else if(!track.querySelector('[data-clone="1"]')) { ensureClones(); }
        var prev = track.style.transition;
        track.style.transition = 'none';
        setTransform(currentIndex * itemWidth);
        setTimeout(function(){ track.style.transition = prev; }, 0);
      }
      function debounce(fn, ms){ var t; return function(){ var a = arguments; clearTimeout(t); t = setTimeout(function(){ fn.apply(null, a); }, ms); }; }

      window.addEventListener('load', function(){ layout(); visibleCount = computeVisibleCount(); ensureClones(); start(); });
      if(PAUSE_ON_HOVER){ container.addEventListener('mouseenter', stop); container.addEventListener('mouseleave', start); }
      if(toggleBtn){ toggleBtn.addEventListener('click', function(){ intervalId ? stop() : start(); }); }
      document.addEventListener('visibilitychange', function(){ document.hidden ? stop() : start(); });
      window.addEventListener('resize', debounce(function(){
        var prevV = visibleCount;
        layout();
        if(visibleCount !== prevV){
          currentIndex = currentIndex % originals.length;
          var prev = track.style.transition;
          track.style.transition = 'none';
          setTransform(currentIndex * itemWidth);
          setTimeout(function(){ track.style.transition = prev; }, 0);
        }
      }, 150));
    })();
  </script>
</body>
</html>
